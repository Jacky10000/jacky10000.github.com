###vue项目中遇到的一些难搞的需求


# 排序组件

项目用了element-ui实现表格，但是打印页面用的是原生的table标签，需要在表头坐做一个排序按钮，每一列都需要，一开始以为蛮简单，就是父子组件传值，父组件将需要排序的数据传给子组件排序，很快实现出来后，发现几个bug，一是因为排序箭头比较小，所以想实现点击那列的表头也能实现排序效果，而且箭头的样式也得跟UI库一样，点击一次升序排列，再点一次降序排列，再点一次恢复默认，箭头要随着进行高亮变化；而是因为表格会根据数组的个数循环渲染，父组件可能会存在几个数据不一样的表格，而我的初始实现方法是通过this.$refs.xxx来操作子组件的排序方法，通过v-for循环出来的子组件可能会存在多个相同的this.$refs.xxx，导致排序时只有第一个表格生效，其他的表格没有效果；后来实现的方法给当前列的表头加更换class名，样式的变化不在排序子组件里实现。
通过三个函数hasClass，addClass，removeClass来判断当前点击排序进行到哪一步，直接找当前点击对象的子节点的方法



# 双向绑定









# 引入iframe实现数据缓存
	项目中有多个iframe菜单栏需要展示，原本的写法是有一个组件里面有iframe元素，src的值动态绑定vuex里面的一个全局变量，src的值是根据路由传的参数来获取对应的值，效果蛮好的，但是后来客户嫌多个iframe菜单栏之间切换会把输入的数据给整没了，要求做数据缓存，iframe菜单之间切换数据不变。但是对iframe不懂，以为做个缓存挺简单的，结果发现实现不了，网上查和问同行都说没有解决办法，差点就绝望了，觉得老板是想劝退我。后来研究了一下，切换iframe菜单时会刷新是因为每次切换iframe时都会重新给iframe赋值，所以自然会重新请求数据，页面就会刷新。所以第一个思路是在组件每次打开时创建一个iframe标签并赋值给src，然后根据路由带的id参数获取对应src值，切换其他菜单时把iframe销毁，但是因为技术太菜，产生了一堆bug，花了一整天最后宣告失败。  
	最终用一种简单的办法实现了效果：把包裹iframe元素的组件写在与其他路由同级的地方，并通过vuex里面的全局变量来控制<router-view>与iframe的显隐，鉴听路由来判断什么时候显示iframe，什么时候隐藏；src的值按照以前的办法从vuex里获取，然后通过v-for来循环出多个iframe，循环的依据是根据打开的iframe的菜单栏的个数，然后获取路由里的ID参数来决定哪个Iframe标签进行展示










# table表格里展示的数据过多，请求数据回来到展示可能需要4-5s，优化
	最简单的办法是做分页+滚动加载，但是项目中的接口很多是通用的，改接口并不现实，所以前端进行模拟分页并实现滚动加载，有一个难点是这是element-ui里的表格组件，有一个全选和按钮，这里会出现bug，点击全选只会勾选上当前展示在表格里的数据，不会把未展示的数据也给发送给后台，需要对element-ui里的全选方法进行稍微的修改。点击全选时判断当前数据是否全部展示出来，并调用element-ui里面的全选方法：this.$refs.billDetailTable.toggleRowSelection(item,false);





###vue项目中用过的一些插件

1、vuedraggable
vuedraggable是一个拖拽插件，用于div内拖拽或者div之间拖拽